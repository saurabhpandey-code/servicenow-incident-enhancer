<?xml version="1.0" encoding="UTF-8"?><record_update sys_domain="global" table="sys_script">
    <sys_script action="INSERT_OR_UPDATE">
        <abort_action>false</abort_action>
        <active>true</active>
        <advanced>true</advanced>
        <category>business_rule</category>
        <collection>incident</collection>
        <condition/>
        <description>Set u_last_updated_by_team when assignment_group changes</description>
        <execute_function/>
        <filter_condition/>
        <is_restore>false</is_restore>
        <message/>
        <name>BR Set Last Updated By Team</name>
        <order>100</order>
        <priority/>
        <rest_method/>
        <rest_method_text/>
        <rest_service/>
        <rest_service_text/>
        <rest_variables/>
        <roles/>
        <script><![CDATA[(function executeRule(current, previous /*null when async*/){
    // Business Rule: Set u_last_updated_by_team when assignment_group changes
    // Table: incident
    // When: before update (preferred to avoid recursion)

    // Only proceed if assignment_group actually changed
    if (!current.assignment_group.changes()) {
        return;
    }

    // Get the display name of the new assignment group
    var groupName = current.assignment_group.getDisplayValue() || '';

    // Set the u_last_updated_by_team field to the group name
    current.u_last_updated_by_team = groupName;

    // In a 'before' rule, setting current.* is persisted automatically
})(current, previous);
]]></script>
        <sys_class_name>sys_script</sys_class_name>
        <sys_created_by>admin</sys_created_by>
        <sys_domain>global</sys_domain>
        <sys_domain_path>/</sys_domain_path>
        <sys_id>7f9a1c2b83a132109135f6b6feaad001</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_name>BR Set Last Updated By Team</sys_name>
        <sys_overrides/>
        <sys_package display_value="Incident Enhancer" source="x_1731528_incide_1">34125aaf830132109135f6b6feaad35d</sys_package>
        <sys_policy/>
        <sys_scope display_value="Incident Enhancer">34125aaf830132109135f6b6feaad35d</sys_scope>
        <sys_update_name>sys_script_7f9a1c2b83a132109135f6b6feaad001</sys_update_name>
        <sys_updated_by>admin</sys_updated_by>
        <table>incident</table>
        <template/>
        <when>before</when>
        <workflow>true</workflow>
        <insert>false</insert>
        <update>true</update>
        <delete>false</delete>
    </sys_script>
</record_update>
